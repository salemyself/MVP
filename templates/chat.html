{% extends "base.html" %}

{% block title %}–ß–∞—Ç - –ü—Ä–æ–≤–µ—Ä—è–π.AI{% endblock %}

{% block content %}
<div class="chat-container">
    <div class="chat-layout">
        <aside class="chat-sidebar">
            <h3>–ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–æ–≤</h3>
            <div class="chat-history-list">
                {% if chat_history %}
                    {% for chat in chat_history %}
                    <div class="chat-history-item" data-chat-id="{{ chat.id }}">
                        <a href="{{ url_for('view_chat', chat_id=chat.id) }}" style="text-decoration: none; color: inherit; display: block;">
                            <div class="chat-history-date">
                                {{ chat.created_at.strftime('%d.%m.%Y %H:%M') }}
                            </div>
                            <div class="chat-history-preview">
                                <strong>–≠—Å—Å–µ:</strong> {{ chat.short_essay }}<br>
                                <strong>–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:</strong> {{ chat.short_requirements }}
                            </div>
                        </a>
                        <div style="margin-top: 10px; text-align: right;">
                            <button onclick="deleteChat({{ chat.id }})" class="delete-chat-btn">–£–¥–∞–ª–∏—Ç—å</button>
                        </div>
                    </div>
                    {% endfor %}
                {% else %}
                    <div class="chat-history-item">
                        <div class="chat-history-preview" style="text-align: center; color: var(--light-text-color);">
                            –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–æ–≤ –ø—É—Å—Ç–∞.<br>
                            –ù–∞—á–Ω–∏—Ç–µ –Ω–æ–≤—ã–π –¥–∏–∞–ª–æ–≥ —Å–ø—Ä–∞–≤–∞.
                        </div>
                    </div>
                {% endif %}
            </div>
        </aside>

        <main class="chat-main">
            <h2>–ù–æ–≤—ã–π –¥–∏–∞–ª–æ–≥</h2>
            <p style="color: var(--light-text-color); margin-bottom: 2rem;">
                –í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —ç—Å—Å–µ –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã, —É–∫–∞–∂–∏—Ç–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞.
            </p>

            <form id="chat-form">
                <div style="margin-bottom: 1.5rem;">
                    <label for="essay-text">–¢–µ–∫—Å—Ç —ç—Å—Å–µ:</label>
                    <textarea id="essay-text" name="essay-text" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Å—é–¥–∞ —Ç–µ–∫—Å—Ç —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–æ–π —Ä–∞–±–æ—Ç—ã..."></textarea>
                </div>
                
                <div style="margin-bottom: 1.5rem;">
                    <label>–ò–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã:</label>
                    <div id="file-upload-area" class="file-upload-area">
                        <div class="file-upload-icon">üìÅ</div>
                        <div class="file-upload-text">
                            <strong>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª—ã —Å—é–¥–∞</strong> –∏–ª–∏ <strong>–Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞</strong><br>
                            <small>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è: TXT, PDF, DOC, DOCX, RTF (–¥–æ 16MB)</small>
                        </div>
                        <input type="file" id="file-input" class="file-upload-input" multiple accept=".txt,.pdf,.doc,.docx,.rtf">
                    </div>
                    <div id="uploaded-files" class="uploaded-files"></div>
                </div>
                
                <div style="margin-bottom: 1.5rem;">
                    <label for="requirements">–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏:</label>
                    <textarea id="requirements" name="requirements" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –ø–ª–∞–≥–∏–∞—Ç, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–µ–º–µ, —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –Ω–∞–ª–∏—á–∏–µ –≤—ã–≤–æ–¥–æ–≤, –≥—Ä–∞–º–º–∞—Ç–∏–∫—É..." required></textarea>
                </div>
                
                <button type="submit" class="btn" id="submit-chat">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É</button>
            </form>

            <div class="chat-output" id="chat-output">
                <p class="placeholder">–ó–¥–µ—Å—å –ø–æ—è–≤—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏...</p>
            </div>
        </main>
    </div>
</div>
{% endblock %}